var lecturers={},hash=window.location.hash,page=1,numberOfPages=$("#number-of-pages").text();$(document).ready(function(){hash&&"#page"==hash.substring(0,5)&&(page=parseInt(hash.substring(6))),$("#pagination").pagination({items:numberOfPages,itemOnPage:8,currentPage:page,cssStyle:"",prevText:'<span aria-hidden="true">&laquo;</span>',nextText:'<span aria-hidden="true">&raquo;</span>',onInit:function(){getData()},onPageClick:function(e,t){page=e,window.location.hash="#page-"+page,console.log(page),null==lecturers[page]?getData():setDataToTable()}}),$(".unit-search-item.link").click(function(e){var t=$(this);$("#category-search-drop-menu-button").html(t.attr("data-name")+' <span class="caret"></span>'),null!=t.attr("data-id")?$(".unit-id").val(t.attr("data-id")):$(".unit_id").val(null),e.preventDefault()}),$(".form-control.category-search.input").keyup(function(){var e=$(".form-control.category-search.input"),t=e.val();console.log("keyup with text: "+t),$(".unit-search-item").each(function(e){var a=$(this);a.text().toLowerCase().indexOf(t.toLowerCase())>=0?a.show():a.hide()})})});var success=function(e){1==e.status?(console.log(e),lecturers[page]=[],e.data.forEach(function(e){lecturers[page].push(e)}),setDataToTable(10*(page-1),e.data.length)):$.toast({heading:"Error",text:e.message,icon:"error"})},error=function(e){$.toast({heading:"Error",text:"Can't send request",icon:"error"})},getData=function(){var e={page:page};"moderator"==$("#current-role").text()&&(e.faculty_id=$("#current-facultyID").text()),$.ajax({url:"/users/api/lecturers",method:"GET",data:e,success:success,error:error})},setDataToTable=function(){$(".table.table-body").children().remove(),lecturers[page].forEach(function(e){if(null!=e.lecturer){var t="";e.lecturer.fields.forEach(function(e){t.append("<span class='label label-primary'>"+e.name+"</span>")}),$("#table-lecturers").append("<tr><td>"+e.officerNumber+"</td><td>"+e.fullName+"</td><td>"+e.email+"</td><td>"+e.unit.name+"</td><td>"+e.faculty.name+"</td><td>"+t+"</td></tr>")}})};