var students={},hash=window.location.hash,page=1,numberOfPages=$("#number-of-pages").text();$(document).ready(function(){hash&&"#page"==hash.substring(0,5)&&(page=parseInt(hash.substring(6))),console.log(page),$("#pagination").pagination({items:numberOfPages,itemOnPage:8,currentPage:page,cssStyle:"",prevText:'<span aria-hidden="true">&laquo;</span>',nextText:'<span aria-hidden="true">&raquo;</span>',onInit:function(){getData()},onPageClick:function(t,e){page=t,window.location.hash="#page-"+page,console.log(page),null==students[page]?getData():setDataToTable()}}),configCourseAndProgram(),$("#faculty_id").change(function(){configCourseAndProgram()}),configCourseAndProgramForUpdate(),$("#update-faculty-id").change(function(){configCourseAndProgramForUpdate()}),$("#btn-update-submit").click(function(t){t.preventDefault(),updateInfo()})});var configCourseAndProgram=function(){var t=$("#faculty_id").val(),e=!1;$(".course-option-item").each(function(a,n){$(this).attr("data-faculty-id")!=t?($(this).hide(),$(this).attr("selected",!1)):($(this).show(),0==e&&($(this).attr("selected",!0),e=!0))});var a=!1;$(".program-option-item").each(function(e,n){$(this).attr("data-faculty-id")!=t?($(this).hide(),$(this).attr("selected",!1)):($(this).show(),0==a&&($(this).attr("selected",!0),a=!0))})},configCourseAndProgramForUpdate=function(){var t=$("#update-faculty-id").val(),e=!1;$(".update-course-option-item").each(function(a,n){$(this).attr("data-faculty-id")!=t?($(this).hide(),$(this).attr("selected",!1)):($(this).show(),0==e&&($(this).attr("selected",!0),e=!0))});var a=!1;$(".update-program-option-item").each(function(e,n){$(this).attr("data-faculty-id")!=t?($(this).hide(),$(this).attr("selected",!1)):($(this).show(),0==a&&($(this).attr("selected",!0),a=!0))})},getData=function(){var t={page:page};"moderator"==$("#current-role").text()&&(t.faculty_id=$("#current-facultyID").text()),$.ajax({url:"/admin/users/api/students",method:"GET",data:t,success:function(t){1==t.status?(console.log(t),students[page]=[],t.data.forEach(function(t){students[page].push(t)}),setDataToTable(10*(page-1),t.data.length)):$.toast({heading:"Error",text:t.message,icon:"error"})},error:errorHandler})},updateInfo=function(){$.ajax({url:"/admin/users/api/students/update",method:"POST",data:{officer_number:$("#update-officer-number").val(),email:$("#update-email").val(),faculty_id:$("#update-faculty-id").val(),course_id:$("#update-course-id").val(),program_id:$("#update-program-id").val(),full_name:$("#update-full-name").val(),thesis_registrable:"true"==$("#update-thesis-registrble").val()},success:function(t){if(console.log(t.data),$("#update-student-modal").modal("hide"),1==t.status){for(var e=0;e<=students[page].length;e++)if(students[page][e].id==t.data.id){students[page][e]=t.data;break}console.log(students),setDataToTable()}else $.toast({heading:"Error",text:t.message,icon:"error"})},error:errorHandler})},setDataToTable=function(){$(".table.table-body").children().remove(),students[page].forEach(function(t){if(null!=t.student){var e="NO";t.student.thesisRegistrable&&(e="YES"),$("#table-students").append("<tr><td>"+t.officerNumber+"</td><td>"+t.fullName+"</td><td>"+t.email+"</td><td>"+t.faculty.name+"</td><td>"+t.student.course.name+"</td><td>"+t.student.program.name+"</td><td>"+e+"</td><td><a onclick=\"editStudent(event,'"+t.id+"')\">Edit</a></td></tr>")}})},editStudent=function(t,e){t.preventDefault();var a;for(var n in students)if(a=$.grep(students[n],function(t){return t.id==e})[0],null!=a)break;$("#update-officer-number").val(a.officerNumber),$("#update-email").val(a.email),$("#update-faculty-id").val(a.faculty.id),$("#update-course-id").val(a.student.course.id),$("#update-program-id").val(a.student.program.id),$("#update-full-name").val(a.fullName),$("#update-thesis-registrble").val(a.student.thesisRegistrable?"true":"false"),$("#update-student-modal").modal("show")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLnN0dWRlbnRzLmpzIl0sIm5hbWVzIjpbInN0dWRlbnRzIiwiaGFzaCIsIndpbmRvdyIsImxvY2F0aW9uIiwicGFnZSIsIm51bWJlck9mUGFnZXMiLCIkIiwidGV4dCIsImRvY3VtZW50IiwicmVhZHkiLCJzdWJzdHJpbmciLCJwYXJzZUludCIsImNvbnNvbGUiLCJsb2ciLCJwYWdpbmF0aW9uIiwiaXRlbXMiLCJpdGVtT25QYWdlIiwiY3VycmVudFBhZ2UiLCJjc3NTdHlsZSIsInByZXZUZXh0IiwibmV4dFRleHQiLCJvbkluaXQiLCJnZXREYXRhIiwib25QYWdlQ2xpY2siLCJldnQiLCJzZXREYXRhVG9UYWJsZSIsImNvbmZpZ0NvdXJzZUFuZFByb2dyYW0iLCJjaGFuZ2UiLCJjb25maWdDb3Vyc2VBbmRQcm9ncmFtRm9yVXBkYXRlIiwiY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCJ1cGRhdGVJbmZvIiwiZmFjdWx0eUlEIiwidmFsIiwiY291cnNlU2VsZWN0ZWQiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwidGhpcyIsImF0dHIiLCJoaWRlIiwic2hvdyIsInByb2dyYW1TZWxlY3RlZCIsImRhdGEiLCJmYWN1bHR5X2lkIiwiYWpheCIsInVybCIsIm1ldGhvZCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsInN0YXR1cyIsImZvckVhY2giLCJzdHVkZW50IiwicHVzaCIsImxlbmd0aCIsInRvYXN0IiwiaGVhZGluZyIsIm1lc3NhZ2UiLCJpY29uIiwiZXJyb3IiLCJlcnJvckhhbmRsZXIiLCJvZmZpY2VyX251bWJlciIsImVtYWlsIiwiY291cnNlX2lkIiwicHJvZ3JhbV9pZCIsImZ1bGxfbmFtZSIsInRoZXNpc19yZWdpc3RyYWJsZSIsIm1vZGFsIiwiaSIsImlkIiwiY2hpbGRyZW4iLCJyZW1vdmUiLCJyZWdpc3RyYWJsZSIsInRoZXNpc1JlZ2lzdHJhYmxlIiwiYXBwZW5kIiwib2ZmaWNlck51bWJlciIsImZ1bGxOYW1lIiwiZmFjdWx0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R0FBUUEsUUFBUXFCLG9CQUNoQkQsRUFBYyxPQUdsQm5FLEVBQUUsbUJBQW1CcUUsT0FBTyxXQUNmdEIsRUFBUXVCLGNBQWdCLFlBQ3hCdkIsRUFBUXdCLFNBQVcsWUFDbkJ4QixFQUFRVSxNQUFRLFlBQ2hCVixFQUFReUIsUUFBUUMsS0FBTyxZQUN2QjFCLEVBQVFBLFFBQVEyQixPQUFPRCxLQUFPLFlBQzlCMUIsRUFBUUEsUUFBUTRCLFFBQVFGLEtBQU8sWUFDL0JOLEVBQWMsNENBQ2tCcEIsRUFBUWlCLEdBQUssK0JBV2xFWSxZQUFjLFNBQVVwRCxFQUFHcUQsR0FDM0JyRCxFQUFFQyxnQkFFRixJQUFJc0IsRUFFSixLQUFLLEdBQUlqRCxLQUFRSixVQUtiLEdBSkFxRCxFQUFVL0MsRUFBRThFLEtBQUtwRixTQUFTSSxHQUFPLFNBQVUwQixHQUN2QyxNQUFPQSxHQUFFd0MsSUFBTWEsSUFDaEIsR0FFWSxNQUFYOUIsRUFDQSxLQUlSL0MsR0FBRSwwQkFBMEI0QixJQUFJbUIsRUFBUXVCLGVBQ3hDdEUsRUFBRSxpQkFBaUI0QixJQUFJbUIsRUFBUVUsT0FDL0J6RCxFQUFFLHNCQUFzQjRCLElBQUltQixFQUFReUIsUUFBUVIsSUFDNUNoRSxFQUFFLHFCQUFxQjRCLElBQUltQixFQUFRQSxRQUFRMkIsT0FBT1YsSUFDbERoRSxFQUFFLHNCQUFzQjRCLElBQUltQixFQUFRQSxRQUFRNEIsUUFBUVgsSUFDcERoRSxFQUFFLHFCQUFxQjRCLElBQUltQixFQUFRd0IsVUFDbkN2RSxFQUFFLDZCQUE2QjRCLElBQUltQixFQUFRQSxRQUFRcUIsa0JBQW9CLE9BQVMsU0FDaEZwRSxFQUFFLHlCQUF5QjhELE1BQU0iLCJmaWxlIjoidXNlcnMuc3R1ZGVudHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHN0dWRlbnRzID0ge307XG52YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xudmFyIHBhZ2UgPSAxO1xudmFyIG51bWJlck9mUGFnZXMgPSAkKFwiI251bWJlci1vZi1wYWdlc1wiKS50ZXh0KCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgIGlmIChoYXNoICYmIGhhc2guc3Vic3RyaW5nKDAsIDUpID09ICcjcGFnZScpIHtcbiAgICAgICAgcGFnZSA9IHBhcnNlSW50KGhhc2guc3Vic3RyaW5nKDYpKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhwYWdlKTtcblxuICAgICQoJyNwYWdpbmF0aW9uJykucGFnaW5hdGlvbih7XG4gICAgICAgIGl0ZW1zOiBudW1iZXJPZlBhZ2VzLFxuICAgICAgICBpdGVtT25QYWdlOiA4LFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZSxcbiAgICAgICAgY3NzU3R5bGU6ICcnLFxuICAgICAgICBwcmV2VGV4dDogJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZsYXF1bzs8L3NwYW4+JyxcbiAgICAgICAgbmV4dFRleHQ6ICc8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mcmFxdW87PC9zcGFuPicsXG4gICAgICAgIG9uSW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gZmlyZSBmaXJzdCBwYWdlIGxvYWRpbmdcbiAgICAgICAgICAgIGdldERhdGEoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25QYWdlQ2xpY2s6IGZ1bmN0aW9uIChjdXJyZW50UGFnZSwgZXZ0KSB7XG4gICAgICAgICAgICAvLyBzb21lIGNvZGVcbiAgICAgICAgICAgIHBhZ2UgPSBjdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gXCIjcGFnZS1cIiArIHBhZ2U7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlKTtcbiAgICAgICAgICAgIGlmIChzdHVkZW50c1twYWdlXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZ2V0RGF0YSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXREYXRhVG9UYWJsZSgpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbiAgICAvLyBjb25maWcgY291cnNlIGFuZCBwcm9ncmFtIGZvciBhZGQtbmV3LXN0dWRlbnQgbW9kYWxcbiAgICBjb25maWdDb3Vyc2VBbmRQcm9ncmFtKCk7XG5cbiAgICAkKFwiI2ZhY3VsdHlfaWRcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uZmlnQ291cnNlQW5kUHJvZ3JhbSgpO1xuICAgIH0pO1xuXG4gICAgLy8gY29uZmlnIGNvdXJzZSBhbmQgcHJvZ3JhbSBmb3IgdXBkYXRlIG1vZGFsXG4gICAgY29uZmlnQ291cnNlQW5kUHJvZ3JhbUZvclVwZGF0ZSgpO1xuXG4gICAgJChcIiN1cGRhdGUtZmFjdWx0eS1pZFwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25maWdDb3Vyc2VBbmRQcm9ncmFtRm9yVXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBzdWJtaXQgdXBkYXRlZCBpbmZvXG4gICAgJChcIiNidG4tdXBkYXRlLXN1Ym1pdFwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVwZGF0ZUluZm8oKTtcbiAgICB9KVxufSk7XG5cbi8qKlxuICogQ29uZmlnIGNvdXJzZSBhbmQgcHJvZ3JhbSBmb3IgYWRkLW5ldy1zdHVkZW50LW1vZGFsIHRoYXQgZml0IHdpdGggZmFjdWx0eVxuICovXG52YXIgY29uZmlnQ291cnNlQW5kUHJvZ3JhbSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmFjdWx0eUlEID0gJChcIiNmYWN1bHR5X2lkXCIpLnZhbCgpO1xuXG4gICAgdmFyIGNvdXJzZVNlbGVjdGVkID0gZmFsc2U7XG5cbiAgICAkKFwiLmNvdXJzZS1vcHRpb24taXRlbVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiZGF0YS1mYWN1bHR5LWlkXCIpICE9IGZhY3VsdHlJRCkge1xuICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJzZWxlY3RlZFwiLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgICAgIGlmIChjb3Vyc2VTZWxlY3RlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcInNlbGVjdGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvdXJzZVNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHByb2dyYW1TZWxlY3RlZCA9IGZhbHNlO1xuXG4gICAgJChcIi5wcm9ncmFtLW9wdGlvbi1pdGVtXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJkYXRhLWZhY3VsdHktaWRcIikgIT0gZmFjdWx0eUlEKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgICQodGhpcykuYXR0cihcInNlbGVjdGVkXCIsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICAgICAgaWYgKHByb2dyYW1TZWxlY3RlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcInNlbGVjdGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHByb2dyYW1TZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufTtcblxuLyoqXG4gKiBDb25maWcgY291cnNlIGFuZCBwcm9ncmFtIGZvciB1cGRhdGUgbW9kYWwgdGhhdCBmaXQgd2l0aCBmYWN1bHR5XG4gKi9cbnZhciBjb25maWdDb3Vyc2VBbmRQcm9ncmFtRm9yVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmYWN1bHR5SUQgPSAkKFwiI3VwZGF0ZS1mYWN1bHR5LWlkXCIpLnZhbCgpO1xuXG4gICAgdmFyIGNvdXJzZVNlbGVjdGVkID0gZmFsc2U7XG5cbiAgICAkKFwiLnVwZGF0ZS1jb3Vyc2Utb3B0aW9uLWl0ZW1cIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtZmFjdWx0eS1pZFwiKSAhPSBmYWN1bHR5SUQpIHtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwic2VsZWN0ZWRcIiwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICBpZiAoY291cnNlU2VsZWN0ZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJzZWxlY3RlZFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb3Vyc2VTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBwcm9ncmFtU2VsZWN0ZWQgPSBmYWxzZTtcblxuICAgICQoXCIudXBkYXRlLXByb2dyYW0tb3B0aW9uLWl0ZW1cIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtZmFjdWx0eS1pZFwiKSAhPSBmYWN1bHR5SUQpIHtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwic2VsZWN0ZWRcIiwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICBpZiAocHJvZ3JhbVNlbGVjdGVkID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwic2VsZWN0ZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbVNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59O1xuXG4vKipcbiAqIEdldCBkYXRhIGZyb20gc2VydmVyXG4gKi9cbnZhciBnZXREYXRhID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHBhZ2U6IHBhZ2VcbiAgICB9O1xuXG4gICAgaWYgKCQoXCIjY3VycmVudC1yb2xlXCIpLnRleHQoKSA9PSBcIm1vZGVyYXRvclwiKSB7XG4gICAgICAgIGRhdGEuZmFjdWx0eV9pZCA9ICQoXCIjY3VycmVudC1mYWN1bHR5SURcIikudGV4dCgpO1xuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogXCIvYWRtaW4vdXNlcnMvYXBpL3N0dWRlbnRzXCIsXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIHN0dWRlbnRzW3BhZ2VdID0gW107XG5cbiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHN0dWRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNbcGFnZV0ucHVzaChzdHVkZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNldERhdGFUb1RhYmxlKChwYWdlIC0gMSkgKiAxMCwgcmVzcG9uc2UuZGF0YS5sZW5ndGgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQudG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiAnRXJyb3InLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlcnJvckhhbmRsZXJcbiAgICB9KTtcbn07XG5cbi8qKlxuICogVXBkYXRlIGluZm8gZm9yIGN1cnJlbnQgc3R1ZGVudFxuICovXG52YXIgdXBkYXRlSW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IFwiL2FkbWluL3VzZXJzL2FwaS9zdHVkZW50cy91cGRhdGVcIixcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgb2ZmaWNlcl9udW1iZXI6ICQoXCIjdXBkYXRlLW9mZmljZXItbnVtYmVyXCIpLnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6ICQoXCIjdXBkYXRlLWVtYWlsXCIpLnZhbCgpLFxuICAgICAgICAgICAgZmFjdWx0eV9pZDogJChcIiN1cGRhdGUtZmFjdWx0eS1pZFwiKS52YWwoKSxcbiAgICAgICAgICAgIGNvdXJzZV9pZDogJChcIiN1cGRhdGUtY291cnNlLWlkXCIpLnZhbCgpLFxuICAgICAgICAgICAgcHJvZ3JhbV9pZDogJChcIiN1cGRhdGUtcHJvZ3JhbS1pZFwiKS52YWwoKSxcbiAgICAgICAgICAgIGZ1bGxfbmFtZTogJChcIiN1cGRhdGUtZnVsbC1uYW1lXCIpLnZhbCgpLFxuICAgICAgICAgICAgdGhlc2lzX3JlZ2lzdHJhYmxlOiAkKFwiI3VwZGF0ZS10aGVzaXMtcmVnaXN0cmJsZVwiKS52YWwoKSA9PSBcInRydWVcIlxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG5cbiAgICAgICAgICAgICQoXCIjdXBkYXRlLXN0dWRlbnQtbW9kYWxcIikubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBzdHVkZW50c1twYWdlXS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHVkZW50c1twYWdlXVtpXS5pZCA9PSByZXNwb25zZS5kYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImJlZm9yZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0dWRlbnRzW3BhZ2VdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzW3BhZ2VdW2ldID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYWZ0ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdHVkZW50c1twYWdlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHVkZW50cyk7XG5cbiAgICAgICAgICAgICAgICBzZXREYXRhVG9UYWJsZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQudG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiAnRXJyb3InLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlcnJvckhhbmRsZXJcbiAgICB9KVxufTtcblxuLyoqXG4gKiBTZXQgZGF0YSB0byB0YWJsZVxuICovXG52YXIgc2V0RGF0YVRvVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgJCgnLnRhYmxlLnRhYmxlLWJvZHknKS5jaGlsZHJlbigpLnJlbW92ZSgpO1xuXG4gICAgc3R1ZGVudHNbcGFnZV0uZm9yRWFjaChmdW5jdGlvbiAoc3R1ZGVudCkge1xuICAgICAgICBpZiAoc3R1ZGVudC5zdHVkZW50ICE9IG51bGwpIHtcblxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhYmxlID0gXCJOT1wiO1xuICAgICAgICAgICAgaWYgKHN0dWRlbnQuc3R1ZGVudC50aGVzaXNSZWdpc3RyYWJsZSkge1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJhYmxlID0gXCJZRVNcIlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcjdGFibGUtc3R1ZGVudHMnKS5hcHBlbmQoJzx0cj4nICtcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBzdHVkZW50Lm9mZmljZXJOdW1iZXIgKyAnPC90ZD4nICtcbiAgICAgICAgICAgICAgICAnPHRkPicgKyBzdHVkZW50LmZ1bGxOYW1lICsgJzwvdGQ+JyArXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgc3R1ZGVudC5lbWFpbCArICc8L3RkPicgK1xuICAgICAgICAgICAgICAgICc8dGQ+JyArIHN0dWRlbnQuZmFjdWx0eS5uYW1lICsgJzwvdGQ+JyArXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgc3R1ZGVudC5zdHVkZW50LmNvdXJzZS5uYW1lICsgJzwvdGQ+JyArXG4gICAgICAgICAgICAgICAgJzx0ZD4nICsgc3R1ZGVudC5zdHVkZW50LnByb2dyYW0ubmFtZSArICc8L3RkPicgK1xuICAgICAgICAgICAgICAgICc8dGQ+JyArIHJlZ2lzdHJhYmxlICsgJzwvdGQ+JyArXG4gICAgICAgICAgICAgICAgJzx0ZD48YSBvbmNsaWNrPVwiZWRpdFN0dWRlbnQoZXZlbnQsXFwnJyArIHN0dWRlbnQuaWQgKyAnXFwnKVwiPkVkaXQ8L2E+PC90ZD4nICtcbiAgICAgICAgICAgICAgICAnPC90cj4nXG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxuICogT3BlbiBhIG1vZGFsIGFsbG93cyB1cyB0byB1cGRhdGUgc3R1ZGVudCBpbmZvXG4gKiBAcGFyYW0gc3R1ZGVudElEXG4gKi9cbnZhciBlZGl0U3R1ZGVudCA9IGZ1bmN0aW9uIChlLCBzdHVkZW50SUQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgc3R1ZGVudDtcblxuICAgIGZvciAodmFyIHBhZ2UgaW4gc3R1ZGVudHMpIHtcbiAgICAgICAgc3R1ZGVudCA9ICQuZ3JlcChzdHVkZW50c1twYWdlXSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmlkID09IHN0dWRlbnRJRDtcbiAgICAgICAgfSlbMF07XG5cbiAgICAgICAgaWYgKHN0dWRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkKFwiI3VwZGF0ZS1vZmZpY2VyLW51bWJlclwiKS52YWwoc3R1ZGVudC5vZmZpY2VyTnVtYmVyKTtcbiAgICAkKFwiI3VwZGF0ZS1lbWFpbFwiKS52YWwoc3R1ZGVudC5lbWFpbCk7XG4gICAgJChcIiN1cGRhdGUtZmFjdWx0eS1pZFwiKS52YWwoc3R1ZGVudC5mYWN1bHR5LmlkKTtcbiAgICAkKFwiI3VwZGF0ZS1jb3Vyc2UtaWRcIikudmFsKHN0dWRlbnQuc3R1ZGVudC5jb3Vyc2UuaWQpO1xuICAgICQoXCIjdXBkYXRlLXByb2dyYW0taWRcIikudmFsKHN0dWRlbnQuc3R1ZGVudC5wcm9ncmFtLmlkKTtcbiAgICAkKFwiI3VwZGF0ZS1mdWxsLW5hbWVcIikudmFsKHN0dWRlbnQuZnVsbE5hbWUpO1xuICAgICQoXCIjdXBkYXRlLXRoZXNpcy1yZWdpc3RyYmxlXCIpLnZhbChzdHVkZW50LnN0dWRlbnQudGhlc2lzUmVnaXN0cmFibGUgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gICAgJChcIiN1cGRhdGUtc3R1ZGVudC1tb2RhbFwiKS5tb2RhbCgnc2hvdycpO1xufTtcbiJdfQ==
